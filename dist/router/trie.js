var K=Object.create;var{getPrototypeOf:L,defineProperty:B,getOwnPropertyNames:I,getOwnPropertyDescriptor:M}=Object,J=Object.prototype.hasOwnProperty;var P=(j,q,b)=>{b=j!=null?K(L(j)):{};let v=q||!j||!j.__esModule?B(b,"default",{value:j,enumerable:!0}):b;for(let x of I(j))if(!J.call(v,x))B(v,x,{get:()=>j[x],enumerable:!0});return v},H=new WeakMap,Q=(j)=>{var q=H.get(j),b;if(q)return q;if(q=B({},"__esModule",{value:!0}),j&&typeof j==="object"||typeof j==="function")I(j).map((v)=>!J.call(q,v)&&B(q,v,{get:()=>j[v],enumerable:!(b=M(j,v))||b.enumerable}));return H.set(j,q),q},R=(j,q)=>()=>(q||j((q={exports:{}}).exports,q),q.exports);var U=(j,q)=>{for(var b in q)B(j,b,{get:q[b],enumerable:!0,configurable:!0,set:(v)=>q[b]=()=>v})};var V=(j,q)=>()=>(j&&(q=j(j=0)),q);var W=((j)=>typeof require!=="undefined"?require:typeof Proxy!=="undefined"?new Proxy(j,{get:(q,b)=>(typeof require!=="undefined"?require:q)[b]}):j)(function(j){if(typeof require!=="undefined")return require.apply(this,arguments);throw Error('Dynamic require of "'+j+'" is not supported')});class C{children;isEndOfWord;handler;isDynamic;pattern;path;method;constructor(){this.children={},this.isEndOfWord=!1,this.handler=[],this.isDynamic=!1,this.pattern="",this.path="",this.method=[]}}class F{root;constructor(){this.root=new C}pushMidl(j,...q){let b=this.root,v=j.split("/").filter(Boolean);if(j==="/"){b.handler.push(...q);return}for(let x of v){let z=x;if(x.startsWith(":"))z=":";if(!b.children[z])b.children[z]=new C;b=b.children[z]}b.handler.push(...q)}insert(j,q){let b=this.root,v=j.split("/").filter(Boolean);if(j==="/"){b.isEndOfWord=!0,b.handler.push(q.handler),b.path=j,b.method.push(q.method);return}for(let x of v){let z=!1,A=x;if(x.startsWith(":"))z=!0,A=":";if(x==="*")A="*";if(!b.children[A])b.children[A]=new C;b=b.children[A],b.isDynamic=z,b.pattern=x}b.isEndOfWord=!0,b.path=j,b.method.push(q.method),b.handler.push(q.handler)}search(j,q){let b=this.root,v=j.split("/").filter(Boolean);for(let E=0;E<v.length;E++){let G=v[E];if(b.children[G])b=b.children[G];else if(b.children[":"])b=b.children[":"];else if(b.children["*"]){b=b.children["*"];break}else return null}let x=b.path.split("/").filter(Boolean);if(x[x.length-1]!=="*"&&v.length!==x.length)return null;if(b.method.indexOf(q)!==-1)return{path:b.path,handler:b.handler[0],pattern:b.pattern};return null}}class O{trie=new F;cache=new Map;add(j,q,b){this.trie.insert(q,{method:j,handler:b})}find(j,q){return this.trie.search(q,j)}}export{F as default,O as TrieRouter};
