var L=Object.create;var{getPrototypeOf:O,defineProperty:B,getOwnPropertyNames:G,getOwnPropertyDescriptor:P}=Object,H=Object.prototype.hasOwnProperty;var Q=(f,j,b)=>{b=f!=null?L(O(f)):{};let q=j||!f||!f.__esModule?B(b,"default",{value:f,enumerable:!0}):b;for(let v of G(f))if(!H.call(q,v))B(q,v,{get:()=>f[v],enumerable:!0});return q},F=new WeakMap,R=(f)=>{var j=F.get(f),b;if(j)return j;if(j=B({},"__esModule",{value:!0}),f&&typeof f==="object"||typeof f==="function")G(f).map((q)=>!H.call(j,q)&&B(j,q,{get:()=>f[q],enumerable:!(b=P(f,q))||b.enumerable}));return F.set(f,j),j},U=(f,j)=>()=>(j||f((j={exports:{}}).exports,j),j.exports);var V=(f,j)=>{for(var b in j)B(f,b,{get:j[b],enumerable:!0,configurable:!0,set:(q)=>j[b]=()=>q})};var W=(f,j)=>()=>(f&&(j=f(f=0)),j);var X=((f)=>typeof require!=="undefined"?require:typeof Proxy!=="undefined"?new Proxy(f,{get:(j,b)=>(typeof require!=="undefined"?require:j)[b]}):f)(function(f){if(typeof require!=="undefined")return require.apply(this,arguments);throw Error('Dynamic require of "'+f+'" is not supported')});class C{children;isEndOfWord;handler;isDynamic;pattern;path;method;constructor(){this.children={},this.isEndOfWord=!1,this.handler=[],this.isDynamic=!1,this.pattern="",this.path="",this.method=[]}}class J{root;constructor(){this.root=new C}pushMidl(f,...j){let b=this.root,q=f.split("/").filter(Boolean);if(f==="/"){b.handler.push(...j);return}for(let v of q){let z=v;if(v.startsWith(":"))z=":";if(!b.children[z])b.children[z]=new C;b=b.children[z]}b.handler.push(...j)}insert(f,j){let b=this.root,q=f.split("/").filter(Boolean);if(f==="/"){b.isEndOfWord=!0,b.handler.push(j.handler),b.path=f,b.method.push(j.method);return}for(let v of q){let z=!1,A=v;if(v.startsWith(":"))z=!0,A=":";if(!b.children[A])b.children[A]=new C;b=b.children[A],b.isDynamic=z,b.pattern=v}b.isEndOfWord=!0,b.path=f,b.method.push(j.method),b.handler.push(j.handler)}search(f,j){let b=this.root,q=f.split("/").filter(Boolean),v=q.length;for(let K of q){let E=K;if(!b.children[E])if(b.children[":"])b=b.children[":"];else return null;else b=b.children[E]}let z=b.path.split("/").filter(Boolean);if(v!==z.length)return null;if(b.method.indexOf(j)!==-1)return{path:b.path,handler:b.handler[0],pattern:b.pattern};return null}}export{J as default};
